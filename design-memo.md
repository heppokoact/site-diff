# 設計メモ

## ざっくりした流れ

- 比較対象URL指定
- HTML取得
- HTMLのDIFF
- 画像のDIFF
- HTML内のリンクを収集する
- 収集したリンクについて再帰的に処理する


## 機能詳細

### 比較指示画面

- 比較するページの指定に単一ページでも複数ページでも指定できる
    - 比較対象URLを指定する（複数指定可）。
    - 比較対象URLに含まれるURLをトラバースするかどうか選べる。
        - include, excludeを正規表現で指定できる。

### 比較結果画面

- 実行結果を実行日時の降順で一覧表示する。
  - 表示項目は実行日時、対象URL、サイト名、ステータス、完了ページ数、全体ページ数、詳細ボタン、比較指示ボタン
  - ステータスが実行中の場合は全体ページ数は表示しない
- 詳細ボタンをクリックすると詳細結果画面に遷移する。
- 比較指示ボタンをクリックすると比較指示画面に遷移する。


### 詳細結果画面

- 実行日時、対象URL、サイト名、ステータス、完了ページ数、全体ページ数、比較指示ボタンを表示する。
- 詳細結果をURLの昇順で一覧表示する。
  - 表示項目は対象URL、ページ名、実行日時（旧）、実行日時（新）、比較結果（HTML）、比較結果（画像）、比較結果表示ボタン
- 比較指示ボタンをクリックすると比較指示画面に遷移する。
- 比較結果表示ボタンをクリックすると比較結果画面に遷移する。

### 比較結果画面

- HTML比較結果、画像比較結果を表示する。


## データ

### 実行結果テーブル

- 実行結果ID
- 実行日時
- ルートURL
- 包含URL
- 除外URL
- サイト名

### 実行結果詳細テーブル

- 実行結果詳細ID
- 実行結果ID
- URL
- ページ名
- 画像パス
- HTML

### 比較結果テーブル

- 比較結果ID
- 旧実行結果ID
- 新実行結果ID
- ステータス
- 完了ページ数
- 全体ページ数

### 比較結果詳細テーブル

- 比較結果詳細ID
- 比較結果ID
- 旧実行結果ID
- 新実行結果ID
- 比較画像パス


## 考慮ポイント

- 下までスクロールしないと画像が表示されなかったりする。

